---
title: ISCC竞赛——模拟微型工厂赛道分享
date: 2026-01-28 14:04:02
description: 这是一篇比赛心得分享。
keywords: 比赛,ISCC
categories:
  - 比赛
tags:
  - 比赛
  - ISCC
---

# ISCC竞赛——模拟微型工厂赛道分享

## 1.赛道分析

​	该赛道如题，微型工厂模拟，主要的过程就是通过写电路程序（软件是西门子的博图V16），然后通过仿真软件（博达特）进行工厂的模拟，然后使用触摸屏的组态软件写一个触摸屏系统，去控制一下仿真软件的启动与停止，之后进行加密，保证在信号传输的过程中不会泄密和被攻击（说明一下，由于比赛可以由多台电脑完成，所以我的加密过程和我队友写程序的过程是同步的）。

​	所用软件如下图，图1是博途V16，图2为博达特仿真软件（图标没了，我就截图一下名字），图3为Xshell（加密软件），图4为触摸屏组态软件

![202510302237217](https://raw.githubusercontent.com/jiangnanqing188/images/main/20260128153637363.png)



![202510302239071](https://raw.githubusercontent.com/jiangnanqing188/images/main/20260128153424299.png)![202510302239408](https://raw.githubusercontent.com/jiangnanqing188/images/main/20260128153024507.png)![202510302239595](https://raw.githubusercontent.com/jiangnanqing188/images/main/20260128153701723.png)

## 2.书写电路程序（30分）

​	这一过程是最考验耐心和细心的，何出此言？在我们比赛的过程中，我的两位队友是负责这个过程的，我有时做完了加密的工作，他们还在写电路程序。写完一个符合要求的电路程序的时间大概是一个小时，看你的熟练程度。这个过程很枯燥，很考验你的耐心。当他们写完之后，还需要检查一下延时的合理性等等。

​	我们在初赛之时（初赛的参加形式是线上参加，录制视频，两个半小时之内完成要求），第一遍视频，我加密做完之后，我的队友写好程序还有一段时间，我在一旁就写触摸屏系统。我两个都做好之后，我的队友刚刚写完，我们检查了一遍程序，就开始了在仿真软件绑定地址的过程，等这一切都做完，我们启动了程序，在第一个台子出料的时候卡住了，此时他们又开始改程序，这个时候已经消耗了一个小时四十五分钟左右。在改完程序之后，大概已经两个小时十分钟了，时间所剩不多。我们得在剩余的时间内完成仿真的正常运行和触摸屏对仿真系统的控制。好在，我们在两个小时二十八分的时候完成了所有内容的操作。但我们仍不满意，所以我们进行了第二遍视频的录制。这一次，我们的程序用了一个小时就完成了。可以看出，程序对于比赛的进程影响是很大的。

​	在写完程序后，需要用网线连接电脑与plc，把程序下载到plc中。

​	该过程通过反复练习，是可以做到熟练并且无错误的。

​	附加一个学习链接【西门子1200PLC速成——全程无废话】https://www.bilibili.com/video/BV1sE4m1d7bj?vd_source=7e37fa35eb21905a6d92f905f190c6e3

​	下图为部分程序的截图

![202510302249914](https://raw.githubusercontent.com/jiangnanqing188/images/main/20260128153708161.png)

![202510302249350](https://raw.githubusercontent.com/jiangnanqing188/images/main/20260128153710035.png)

## 3.通过仿真软件进行模拟（20分）

​	由于该系统需要插加密狗才可以使用，仅分享该流程，无法提供工具使用。	

​	在写完程序之后，进行编译，各个数据块里会出现对应的地址，需要在博达特的数据采集软件中绑定好地址，如图所示。

![202510302253265](https://raw.githubusercontent.com/jiangnanqing188/images/main/20260128153714905.png)

​	这个过程需要注意的有几项：

​		1.注意绑定的数据块。如图，可以看到，DB10.DBX0.0这种地址，DBN（N指代一个数字）是数据块的位置，这个在编译之后会出现，如果程序只有一个DB块，可以不考虑这个问题，你不会写成别的DB块。但由于这个仿真软件有四个台子，有的同学会为了方便，会写四个DB块，这样每个台子都会有一个，它们的N是不一样的，要注意这个问题。

​		2.注意绑定的台子。在绑定时，会有不同的的台子选择，如果数据采集软件的台子选择有问题，在仿真软件中去绑定具体的东西的时候，会出现某个台子缺一个或多个地址的情况，无法绑定具体的东西，以至于无法进行仿真过程。

​		3.注意视觉化的绑定（上图的视觉化展示一栏）。该比赛的得分项中有一个“视觉化展示”，需要在物料送到对应库位后，点开数据采集软件的的“视觉化展示”，把有物料的库位变绿之后的画面给评委看。如果没有绑定视觉化展示，会出现不得分的情况。

​	这个过程可能会出现的问题：

​		1.软件崩掉。软件的底层代码有些问题，有时候内存一大就会崩，需要重进

​		2.加密狗过热出现卡顿。放一会儿加密狗

## 4.触摸屏系统（与仿真这一步分数上绑定，20分）

​	使用的软件是昆仑通态触摸屏的软件——Mcgspro组态软件。

​	在这个过程中，我们要添加一下设备进入组态，如下图，同时父设备需要更改ip地址，本地ip为触摸屏的地址，在plc的触摸屏界面可以更改；远程ip为plc设备的地址，需要在博图中更改，之后下载到plc设备中，这样才能完成更改。

![202510302323548](https://raw.githubusercontent.com/jiangnanqing188/images/main/20260128153718601.png)

![202510302324387](https://raw.githubusercontent.com/jiangnanqing188/images/main/20260128153720905.png)

​	如下图，需要做的几个按钮。

![image-20251030232228736](https://raw.githubusercontent.com/jiangnanqing188/images/main/20260128153733770.png)

​	如何做呢？要在变量表添加，根据你放在程序中的地址，如果在DB块内

![202510302355290](https://raw.githubusercontent.com/jiangnanqing188/images/main/20260128153740139.png)

​	这个过程有可能会出问题的地方：忘记改ip。把触摸屏系统下载到plc的触摸屏上的时候，如果没有改ip，通信不成功，无法下载

## 5. 数据加密技术实现（30分）

这一部分是整个赛道的灵魂，主要通过两个加密盒子（Server 端和 Client 端）建立 VPN 隧道，保证 PC 与 PLC 之间通信的安全。

### 1. 硬件连接与 Xshell 环境准备

- **Xshell 配置**：将串口模块插好，在设备管理器确认端口号（比如 COM3）。在 Xshell 新建会话时，**协议必须选 SERIAL**，端口号要对上，否则连不上盒子。
- **提一嘴盒子的连接**：eth0是要连设备的，eth1是两个盒子互相连接的

### 2. 人脸录入与认证

上电后，很多盒子会卡在人脸识别脚本。第一次使用没信息会由于“系统阻塞”进不去命令行。

- **按键操作**：模组背面有三个键。短按 **S1** 注册（脸离摄像头 **50cm**），**S2** 识别，**S3** 复位。
- **跳过阻塞**：认证成功出现 Verify ok 才能操作。为了防止反复重启报错，建议先用 ps -a 查看进程，把 wlan 连接和异常检测脚本 kill 掉，然后用 vi /etc/init.d/rcS 把人脸识别等脚本暂时注释掉（前面加 #）。

### 3. 网络 IP 配置（eth0 设置）

为了让设备互相 Ping 通，需要修改 /etc/network/interfaces 文件。

- **Server 端**：根据电脑网段设置，如电脑是 192.168.2.2，Server 的 eth0 就设为 192.168.2.1。
- **Client 端**：要和PLC 保持同网段，比如设为 192.168.44.1。

### 4. 无线与 VPN 加密隧道连接

这是最核心的配置，涉及 wpa_supplicant.conf 的 SSID/密码设置，以及 VPN 隧道的建立。

- **VPN 配置文件**：Server 端修改 server.conf1，Client 端修改 client.conf1。
- **网段对应**：这里最容易出错。local_addrs 不能与 eth0 网段冲突。local_ts 和 remote_ts 必须严格对应两端的以太网网段（如 192.168.2.0/24 和 192.168.44.0/24）。

### 5. 脚本更换与自动化启动

文档提供了 S100wlan0 和 guard 两个脚本内容。

- **避坑点**：删除旧文件新建时，粘贴要注意。有时候第一行的 local 会变成 cal，少两个字母脚本就废了，必须手动补齐。
- **auto_defconfig**：在这个文件里选好模式（mode=eth1 或 wlan）。
- **恢复自启**：全部配置完，回到 /etc/init.d/rcS 把之前注释掉的脚本取消注释，这样重启后盒子就会自动运行加密和连接程序。
